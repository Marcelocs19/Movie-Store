# Movie-Store


### Requirements
For building and runnig the application you need:
* [MySQL](https://dev.mysql.com/downloads/installer/)

* [Java SE 11](https://www.oracle.com/technetwork/java/javase/downloads/jdk11-downloads-5066655.html/)

* [Maven](https://maven.apache.org/download.cgi)

### Clone project
To get started you can clone this repository using git:
```
git clone https://github.com/Marcelocs19/Movie-Store.git
```
### MySQL
```
1. create database movie_store;
```
```
2. create user 'usertest'@'%' identified by '123456';
```
```
3. grant all on movie_store.* to 'usertest'@'%';
```
```
4. use movie_store;
```

### Running the application locally
There are several ways to run a Spring Boot application on your local machine. One way is to execute the main method in the MovieStoreApplication class from your IDE.

Or you can run the application from the command line using:

```
mvn spring-boot:run
```

### Paths
1. Method lists all available movies
Get - http://localhost:8080/movies


2. Method searches movies by title
Post - http://localhost:8080/movies/search
```
Postman
Add parameter "title" 
Example of parameters
Key: title
Value: Star Wars: The Last Jedi
http://localhost:8080/movies/search?title=Star Wars: The Last Jedi

```

3. Method Login
Post - http://localhost:8080/login
```
Postman
Add Body json with email and password.
Example of parameters:
{
 "email":"john@gmail.com",
 "password":"1234"
}
```

4. Method creates a new user
Post - http://localhost:8080/users
```
Postman
Add Body json with email, password and name.
Example of parameters:
{
 "email":"john@gmail.com",
 "password":"1234",
 "name":"John"
}
```

5. Method to rent a movie
Post - http://localhost:8080/rent/{id}
```
Postman
Put in place of {id} the id of the movie you want to rent.
Add Body json with email and password.
Add o token generated by logging in.
Example json:
{
 "email":"john@gmail.com",
 "password":"1234",
 "name":"John"
}
Example Authorization:
token:"eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJBUEkgTW92aWUgU3RvcmUiLCJzdWIiOiI0IiwiaWF0IjoxNTcxMDk3MjM1LCJleHAiOjE1NzExMDA4MzV9.ysQGBGQyJXhRQszpDmq37pbEQYAfCMa2lnT9vsTZ7j4",
type: Bearer
```

6. Method returns a movie
Post - http://localhost:8080/rent/return/{id}
```
Postman
Put in place of {id} the id of the movie you want to return.
Add Body json with email and password.
Add o token generated by logging in.
Example json:
{
 "email":"john@gmail.com",
 "password":"1234",
 "name":"John"
}
Example Authorization:
token:"eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJBUEkgTW92aWUgU3RvcmUiLCJzdWIiOiI0IiwiaWF0IjoxNTcxMDk3MjM1LCJleHAiOjE1NzExMDA4MzV9.ysQGBGQyJXhRQszpDmq37pbEQYAfCMa2lnT9vsTZ7j4",
type: Bearer

```

7. Method Logout
Get - http://localhost:8080/logout


## License

This project is licensed under the MIT License - see the [LICENSE.md](LICENSE.md) file for details
